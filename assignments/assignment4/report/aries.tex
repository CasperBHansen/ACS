%==============================================================================%
% ARIES                                                                        %
%==============================================================================%

\section{ARIES}

The ARIES recovery method starts at the most recent checkpoint. Since ARIES
use fuzzy checkpoints, only the transaction table ({\tt TT}) and dirty page
table ({\tt DPT}) is given, and these are empty in this case.

\noindent
The three phases proceeds as follows

\noindent
{\bf Analysis:}

In this phase the log is read from checkpoint until the most recent entry in
the log.
\begin{enumerate}
\item {\tt LNS: 1} - Start of checkpoint. We here look ahead to find the
{\tt DPT} and {\tt TT}. These are found empty at {\tt LNS: 2}. The log is now
scanned until time of crash.
\item {\tt LNS: 3} - Add {\tt T1} as {\tt U} with LAST\_LSN set to {\tt 3} in {\tt TT} and {\tt P2} to {\tt DPT} with recLSN equal 3.
\item {\tt LNS: 4} - Add {\tt P1} to {\tt DPT} with recLSN equal 4 and change LAST\_LSN of
    {\tt T1} set to 4 in {\tt TT}.
\item {\tt LNS: 5} - Add {\tt T2} at {\tt U} with LAST\_LSN set to {\tt 5}
    to {\tt TT} and {\tt P5} to {\tt DPT} with recLSN equal 5.
\item {\tt LNS: 6} - Add {\tt T3} as {\tt U} with LAST\_LSN set to {\tt 6}
    to {\tt TT} and {\tt P3} to {\tt DPT}  with recLSN equal 6.
\item {\tt LNS: 7} - Change {\tt T3} to {\tt C} and change LAST\_LSN to 7 in {\tt TT}.
\item {\tt LNS: 8} - Change LAST\_LSN of {\tt T2} to 8 in {\tt TT}.
\item {\tt LNS: 9} - Change LAST\_LSN of {\tt T2} to 9 in {\tt TT}.
\item {\tt LNS: 10} - Remove {\tt T3} from {\tt TT}.
\end{enumerate}

\noindent
{\bf Redo:}

\begin{enumerate}
\item ...
\end{enumerate}

\noindent
{\bf Undo:}

\begin{enumerate}
\item ...
\end{enumerate}

\subsection{Transaction state and dirty pages after analysis phase}
Following the above the transaction table includes
\begin{itemize}
\item {\tt T1} with status {\tt U} and LAST\_LSN equal to 3.
\item {\tt T2} with status {\tt U} and LAST\_LSN equal to 8.
\end{itemize}
and the dirty page table holds
\begin{itemize}
\item {\tt P1} with recLSN equal to 4.
\item {\tt P2} with recLSN equal to 3.
\item {\tt P3} with recLSN equal to 6.
\item {\tt P5} with recLSN equal to 5.
\end{itemize}

\subsection{The sets of winners and loser transactions}
\dots

\subsection{Values for LSNs at redo phase start and undo phase end}
\dots

\subsection{Set of log records that may rewrite during redo phase}
\dots

\subsection{Set of log records undone}
\dots

\subsection{Contents of the log after recovery}
\dots

